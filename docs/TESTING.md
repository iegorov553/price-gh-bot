# üß™ –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Price-GH-Bot —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π SOLID –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, dependency injection –∏ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π –ø–∏—Ä–∞–º–∏–¥–æ–π —Ç–µ—Å—Ç–æ–≤.

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–æ–≤)
3. [Dependency Injection –≤ —Ç–µ—Å—Ç–∞—Ö](#dependency-injection-–≤-—Ç–µ—Å—Ç–∞—Ö)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
5. [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
6. [–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤](#—Ç–∏–ø—ã-—Ç–µ—Å—Ç–æ–≤)
7. [–ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤](#–Ω–∞–ø–∏—Å–∞–Ω–∏–µ-–Ω–æ–≤—ã—Ö-—Ç–µ—Å—Ç–æ–≤)
8. [CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#cicd-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
9. [–û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞](#–æ—Ç–ª–∞–¥–∫–∞-–∏-–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
10. [–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö](#–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö)
11. [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏](#–ª—É—á—à–∏–µ-–ø—Ä–∞–∫—Ç–∏–∫–∏)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üéØ –¶–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Price-GH-Bot —Ä–µ—à–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ–º–æ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö SOLID –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ dependency injection
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- **–†–µ–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∂–∏–≤—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –°–æ–±–ª—é–¥–µ–Ω–∏–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∏ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üèóÔ∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ü–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–æ–≤**: –ú–Ω–æ–≥–æ –±—ã—Å—Ç—Ä—ã—Ö unit —Ç–µ—Å—Ç–æ–≤, –º–µ–Ω—å—à–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö E2E
2. **–ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ DI**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ dependency injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
3. **–ú–æ–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**: Protocol-based –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö unit/integration —Ç–µ—Å—Ç–æ–≤
4. **–†–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã**: E2E —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ API –∏ dependency injection
5. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é
6. **SOLID –≤–∞–ª–∏–¥–∞—Ü–∏—è**: –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞**: –ú–∏–Ω–∏–º—É–º 70%, —Ü–µ–ª—å 80%+ (–≤–∫–ª—é—á–∞—è –≤—Å–µ —Å–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
- **–°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: Unit < 1—Å, Integration < 5—Å, E2E < 60—Å
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: 95%+ —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤ –≤ CI/CD
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–∞–≥–æ–≤**: –ö–∞–∂–¥—ã–π –±–∞–≥ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –Ω–æ–≤–æ–º—É —Ç–µ—Å—Ç—É
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ**: 100% —Å–æ–±–ª—é–¥–µ–Ω–∏–µ SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –¥–ª—è SOLID –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)

```
tests_new/
‚îú‚îÄ‚îÄ unit/                           # –ë—ã—Å—Ç—Ä—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Å DI –º–æ–∫–∞–º–∏)
‚îÇ   ‚îú‚îÄ‚îÄ core/                       # –¢–µ—Å—Ç—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ —Å–ª–æ—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_container.py           # Dependency injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_service_locator.py     # Service locator –ø–∞—Ç—Ç–µ—Ä–Ω
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_interfaces.py          # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/                   # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_commission_contracts.py    # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_shipping_contracts.py      # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞—Å—á—ë—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_currency_contracts.py      # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_reliability_contracts.py   # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_customs_contracts.py       # –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞—Å—á—ë—Ç–∞ –ø–æ—à–ª–∏–Ω
‚îÇ   ‚îú‚îÄ‚îÄ scrapers/                   # –¢–µ—Å—Ç—ã —Å–ª–æ—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_scraper_protocol.py        # ScraperProtocol –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test_ebay_scraper.py           # eBay scraper unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_grailed_scraper.py        # Grailed scraper unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ bot/                        # –¢–µ—Å—Ç—ã —Å–ª–æ—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ test_url_processor.py          # URL –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ test_response_formatter.py     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ test_error_boundary.py         # Error boundary —Å–∏—Å—Ç–µ–º–∞
‚îÇ       ‚îî‚îÄ‚îÄ test_analytics_tracker.py     # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Ç—Ä–µ–∫–∏–Ω–≥
‚îú‚îÄ‚îÄ integration/                    # –¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å DI)
‚îÇ   ‚îú‚îÄ‚îÄ test_di_integration.py          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dependency injection
‚îÇ   ‚îú‚îÄ‚îÄ test_scraping_orchestrator.py   # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è scraping –æ–ø–µ—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ test_bot_handlers_integration.py # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è bot handlers
‚îÇ   ‚îî‚îÄ‚îÄ test_service_communication.py   # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ e2e/                           # –°–∫–≤–æ–∑–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Å –ø–æ–ª–Ω—ã–º DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º)
‚îÇ   ‚îú‚îÄ‚îÄ test_real_urls.py               # –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ URL
‚îÇ   ‚îú‚îÄ‚îÄ test_full_workflow.py           # –ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_error_scenarios.py         # –°—Ü–µ–Ω–∞—Ä–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ fixtures/                      # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_data.json                  # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ di_fixtures.py                  # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ generated_fixtures.py           # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ utils/                         # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ data_updater.py                 # –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ di_test_helpers.py             # –ü–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è DI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ mock_factories.py              # –§–∞–±—Ä–∏–∫–∏ –º–æ–∫–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚îú‚îÄ‚îÄ conftest.py                    # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã pytest —Å DI
‚îî‚îÄ‚îÄ README.md                      # –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
```

### üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ—Å—Ç–∞—Ö (—Å Dependency Injection)

```mermaid
graph TD
    A[conftest.py + DI Container] --> B[Unit Tests + Mocked Services]
    A --> C[Integration Tests + Real DI]
    A --> D[E2E Tests + Full DI Container]
    
    E[fixtures/test_data.json] --> A
    F[utils/data_updater.py] --> E
    G[fixtures/di_fixtures.py] --> A
    
    H[Real Services] --> F
    H --> D
    
    I[Mock Factories] --> B
    I --> C
    
    B --> J[Coverage Report]
    C --> J
    D --> J
    
    J --> K[CI/CD Pipeline]
    
    L[Service Interfaces] --> I
    M[Protocol Validation] --> B
```

---

## Dependency Injection –≤ —Ç–µ—Å—Ç–∞—Ö

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

–ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é dependency injection:

#### Unit Tests - –ü–æ–ª–Ω–æ—Å—Ç—å—é –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```python
@pytest.fixture
def unit_test_container():
    """DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏."""
    container = Container()
    
    # –ú–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    container.register(ICurrencyService, MockCurrencyService, lifetime=Lifetime.SINGLETON)
    container.register(IReliabilityService, MockReliabilityService, lifetime=Lifetime.SINGLETON)
    container.register(IShippingService, MockShippingService, lifetime=Lifetime.SINGLETON)
    container.register(IMarketplaceScraper, MockEbayScraper, lifetime=Lifetime.TRANSIENT)
    
    return container
```

#### Integration Tests - –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

```python
@pytest.fixture
def integration_test_container():
    """DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ API.""" 
    container = Container()
    
    # –†–µ–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
    container.register(IReliabilityService, ReliabilityService, lifetime=Lifetime.SINGLETON)
    container.register(IShippingService, ShippingService, lifetime=Lifetime.SINGLETON)
    
    # –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    container.register(ICurrencyService, MockCurrencyService, lifetime=Lifetime.SINGLETON)
    container.register(IMarketplaceScraper, MockEbayScraper, lifetime=Lifetime.TRANSIENT)
    
    return container
```

#### E2E Tests - –ü–æ–ª–Ω—ã–π —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```python
@pytest.fixture
def e2e_test_container():
    """–ü–æ–ª–Ω—ã–π DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è."""
    container = Container()
    
    # –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–∫ –≤ production
    container.register(ICurrencyService, CurrencyService, lifetime=Lifetime.SINGLETON)
    container.register(IReliabilityService, ReliabilityService, lifetime=Lifetime.SINGLETON)
    container.register(IShippingService, ShippingService, lifetime=Lifetime.SINGLETON)
    container.register(IMarketplaceScraper, EbayScraper, lifetime=Lifetime.TRANSIENT)
    container.register(IMarketplaceScraper, GrailedScraper, lifetime=Lifetime.TRANSIENT)
    
    return container
```

### üé≠ Mock Factories –¥–ª—è Protocol-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```python
class MockCurrencyService:
    """Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ICurrencyService –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤."""
    
    async def get_usd_to_rub_rate(self, session) -> Optional[CurrencyRate]:
        return CurrencyRate(rate=90.0, source="mock", timestamp=datetime.now())
    
    async def get_eur_to_usd_rate(self, session) -> Optional[CurrencyRate]:
        return CurrencyRate(rate=1.1, source="mock", timestamp=datetime.now())
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python 3.11+**: –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- **Docker**: –î–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
- **Playwright**: –î–ª—è headless browser —Ç–µ—Å—Ç–æ–≤
- **Git**: –î–ª—è pre-commit —Ö—É–∫–æ–≤

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# 1. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt -r requirements-dev.txt

# 2. Browser –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤
playwright install chromium

# 3. Pre-commit —Ö—É–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pre-commit install

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
pytest --version
playwright --version
```

### üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
```bash
# –¢–æ–∫–µ–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞
export BOT_TOKEN=8026508902:AAGWJKei_EyPkpc4x-lt-qFQo53829gQIrU
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
```bash
# –†–µ–∂–∏–º headless browser (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false –≤ —Ç–µ—Å—Ç–∞—Ö)
export ENABLE_HEADLESS_BROWSER=true

# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: INFO)
export LOG_LEVEL=DEBUG

# –ú–∞—Ä–∫–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export ENVIRONMENT=test

# Timeout –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)
export TEST_TIMEOUT=120
```

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### pytest.ini
```ini
[tool:pytest]
testpaths = tests_new
addopts = --strict-markers --verbose --tb=short --cov-config=.coveragerc
markers = 
    unit: –ë—ã—Å—Ç—Ä—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    integration: –¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    e2e: –°–∫–≤–æ–∑–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
    slow: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (>5 —Å–µ–∫—É–Ω–¥)
    network: –¢–µ—Å—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
```

#### .coveragerc
```ini
[run]
source = app
branch = True
omit = tests_new/*, venv/*

[report]
fail_under = 70
show_missing = True
```

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### üèÉ‚Äç‚ôÇÔ∏è –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

#### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –í—Å–µ unit —Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä–æ, ~10 —Å–µ–∫—É–Ω–¥)
BOT_TOKEN=8026508902:AAGWJKei_EyPkpc4x-lt-qFQo53829gQIrU pytest tests_new/unit/ -v

# –í—Å–µ integration —Ç–µ—Å—Ç—ã (~30 —Å–µ–∫—É–Ω–¥)
BOT_TOKEN=8026508902:AAGWJKei_EyPkpc4x-lt-qFQo53829gQIrU pytest tests_new/integration/ -v

# –í—Å–µ E2E —Ç–µ—Å—Ç—ã (–º–µ–¥–ª–µ–Ω–Ω–æ, ~5 –º–∏–Ω—É—Ç)
BOT_TOKEN=8026508902:AAGWJKei_EyPkpc4x-lt-qFQo53829gQIrU ENABLE_HEADLESS_BROWSER=true pytest tests_new/e2e/ -v

# –í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ–¥—Ä—è–¥
BOT_TOKEN=8026508902:AAGWJKei_EyPkpc4x-lt-qFQo53829gQIrU pytest tests_new/ -v
```

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã
```bash
# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest tests_new/ --cov=app --cov-report=html --cov-report=term

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest tests_new/ -x

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ—É–¥–∞–≤—à–∏–µ—Å—è —Ç–µ—Å—Ç—ã
pytest tests_new/ --lf

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è
pytest tests_new/ -v -s --tb=long

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests_new/unit/test_commission_contracts.py::TestCommissionContracts::test_commission_calculation_contract -v

# –¢–µ—Å—Ç—ã –ø–æ –º–∞—Ä–∫–µ—Ä—É
pytest tests_new/ -m "unit and not slow" -v

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
pytest tests_new/ -n auto
```

### üõ†Ô∏è Makefile –∫–æ–º–∞–Ω–¥—ã

```bash
# –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
make test-unit           # –ë—ã—Å—Ç—Ä—ã–µ unit —Ç–µ—Å—Ç—ã
make test-integration    # Integration —Ç–µ—Å—Ç—ã
make test-e2e           # E2E —Ç–µ—Å—Ç—ã
make test-all           # –í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
make test-coverage      # –¢–µ—Å—Ç—ã —Å –æ—Ç—á—ë—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è

# Docker –∫–æ–º–∞–Ω–¥—ã  
make test-docker        # –í—Å–µ —Ç–µ—Å—Ç—ã –≤ Docker
make test-docker-unit   # Unit —Ç–µ—Å—Ç—ã –≤ Docker
make test-docker-dev    # Development –æ–∫—Ä—É–∂–µ–Ω–∏–µ

# –£—Ç–∏–ª–∏—Ç—ã
make test-update-data   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
make test-verify        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ URL
make clean-test         # –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
```

### üê≥ Docker —Ä–µ–∂–∏–º—ã

#### –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
docker-compose -f docker-compose.test.yml up test-all --build

# –û—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Ç–µ—Å—Ç–æ–≤
docker-compose -f docker-compose.test.yml up test-unit --build
docker-compose -f docker-compose.test.yml up test-integration --build
docker-compose -f docker-compose.test.yml up test-e2e --build

# –° –æ—Ç—á—ë—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è
docker-compose -f docker-compose.test.yml up test-coverage --build
```

#### Development —Ä–µ–∂–∏–º
```bash
# –ó–∞–ø—É—Å–∫ development –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose -f docker-compose.test.yml up test-dev -d

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker exec -it $(docker-compose -f docker-compose.test.yml ps -q test-dev) bash

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
pytest tests_new/unit/ -v
pytest tests_new/integration/ -v --pdb  # –° –æ—Ç–ª–∞–¥—á–∏–∫–æ–º
```

---

## –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### üéØ Unit —Ç–µ—Å—Ç—ã (tests_new/unit/) - —Å Dependency Injection

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ < 1 —Å–µ–∫—É–Ω–¥—ã –∫–∞–∂–¥—ã–π
- –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–æ–∫–∞–º–∏
- Protocol-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### Unit/Core - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã DI

```python
# tests_new/unit/core/test_container.py
async def test_dependency_injection_container_registration():
    """–¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ."""
    container = Container()
    container.register(ICurrencyService, CurrencyService, lifetime=Lifetime.SINGLETON)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    service = container.resolve(ICurrencyService)
    assert isinstance(service, CurrencyService)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º singleton lifetime
    service2 = container.resolve(ICurrencyService)
    assert service is service2
```

#### Unit/Services - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

```python
# tests_new/unit/services/test_commission_contracts.py
def test_commission_calculation_with_di_container(unit_test_container):
    """–¢–µ—Å—Ç —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä."""
    # Resolve –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ DI
    currency_service = unit_test_container.resolve(ICurrencyService)
    shipping_service = unit_test_container.resolve(IShippingService)
    
    # –¢–µ—Å—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    result = calculate_final_price(
        item_price=Decimal("120.00"),
        us_shipping=Decimal("25.00"),
        russia_shipping=shipping_service.estimate_shipping_cost("hoodie", 145.0)
    )
    assert result.commission == Decimal("15.00")  # Fixed commission <$150
```

#### Unit/Scrapers - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ScraperProtocol

```python
# tests_new/unit/scrapers/test_scraper_protocol.py
async def test_scraper_protocol_compliance():
    """–¢–µ—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è ScraperProtocol –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π."""
    scrapers = [EbayScraper(), GrailedScraper()]
    
    for scraper in scrapers:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
        assert hasattr(scraper, 'scrape_item')
        assert hasattr(scraper, 'scrape_seller')
        assert hasattr(scraper, 'supports_url')
        assert hasattr(scraper, 'is_seller_profile')
        
        # –¢–µ—Å—Ç —Ç–∏–ø–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        assert isinstance(scraper.supports_url("https://example.com"), bool)
```

#### Unit/Bot - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

```python
# tests_new/unit/bot/test_error_boundary.py  
async def test_error_boundary_classification(unit_test_container):
    """–¢–µ—Å—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫ Error Boundary."""
    error_boundary = unit_test_container.resolve(IErrorBoundary)
    
    # –¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
    network_error = aiohttp.ClientError("Connection failed")
    classification = error_boundary.classify_error(network_error)
    
    assert classification['category'] == 'network_error'
    assert classification['user_message'] is not None
    assert classification['should_retry'] == True
```

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ Unit —É—Ä–æ–≤–Ω—è**:
- DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, lifetime —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–µ—Ä–≤–∏—Å—ã: –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –ü—Ä–æ—Ç–æ–∫–æ–ª—ã: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π ScraperProtocol
- Error Boundary: –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –∏ –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è URL

### üîó Integration —Ç–µ—Å—Ç—ã (tests_new/integration/) - —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç–æ—è—â–∏–π DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ < 5 —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥—ã–π
- –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, —á–∞—Å—Ç–∏—á–Ω–æ –º–æ–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–ª–æ—ë–≤

#### test_di_integration.py
```python
async def test_service_orchestration_through_di():
    """–¢–µ—Å—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä."""
    container = create_integration_test_container()
    
    # –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ —Å —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
    orchestrator = container.resolve(IScrapingOrchestrator)
    formatter = container.resolve(IResponseFormatter)
    
    # –¢–µ—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
    results = await orchestrator.process_urls_concurrent(test_urls, user_id=123)
    formatted_response = await formatter.format_item_response(results[0])
    
    assert "–†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏" in formatted_response
```

#### test_scraping_orchestrator.py
```python
async def test_concurrent_scraping_coordination(integration_test_container):
    """–¢–µ—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ scraping."""
    orchestrator = integration_test_container.resolve(IScrapingOrchestrator)
    
    # –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö URL (eBay + Grailed)
    mixed_urls = [
        "https://www.ebay.com/itm/123456789",
        "https://www.grailed.com/listings/123456", 
        "https://www.grailed.com/username"  # Profile URL
    ]
    
    results = await orchestrator.process_urls_concurrent(mixed_urls, user_id=123)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É
    assert len(results) == 3
    assert any(r['type'] == 'item_listing' for r in results)
    assert any(r['type'] == 'seller_profile' for r in results)
```

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ Integration —É—Ä–æ–≤–Ω—è**:
- DI –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- Scraping –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ URL —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –ø–æ—Ç–æ–∫ –æ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Error handling: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Analytics: —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üåê E2E —Ç–µ—Å—Ç—ã (tests_new/e2e/) - —Å –ø–æ–ª–Ω—ã–º DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∫–≤–æ–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ workflow —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**:
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ < 60 —Å–µ–∫—É–Ω–¥ –∫–∞–∂–¥—ã–π
- –ü–æ–ª–Ω—ã–π production DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –†–µ–∞–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ API –∏ —Å–µ—Ä–≤–∏—Å—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### test_full_workflow.py
```python
async def test_complete_user_workflow_with_di():
    """–¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ workflow —á–µ—Ä–µ–∑ DI."""
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    container = create_e2e_test_container()
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ DI
    url_processor = container.resolve(IURLProcessor)
    orchestrator = container.resolve(IScrapingOrchestrator)
    formatter = container.resolve(IResponseFormatter)
    error_boundary = container.resolve(IErrorBoundary)
    
    try:
        # –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        user_message = "https://www.grailed.com/listings/59397754"
        
        # –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        processed_urls = url_processor.process_message(user_message, user_id=123)
        results = await orchestrator.process_urls_concurrent(
            processed_urls['valid_urls'], 
            user_id=123
        )
        response = await formatter.format_item_response(results[0])
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        assert "–†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏" in response
        assert "–¢–æ–≤–∞—Ä:" in response
        assert "‚ÇΩ" in response  # RUB conversion
        
    except Exception as e:
        # –¢–µ—Å—Ç error boundary –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
        handled = await error_boundary.handle_error(e, context={"user_id": 123})
        assert handled is True
```

#### test_real_urls.py  
```python
async def test_grailed_with_seller_analysis_e2e(e2e_test_container):
    """E2E —Ç–µ—Å—Ç Grailed —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø—Ä–æ–¥–∞–≤—Ü–∞."""
    orchestrator = e2e_test_container.resolve(IScrapingOrchestrator)
    
    # –†–µ–∞–ª—å–Ω—ã–π Grailed URL
    test_url = "https://www.grailed.com/listings/59397754"
    
    results = await orchestrator.process_urls_concurrent([test_url], user_id=123)
    
    if not results or results[0].get('error'):
        pytest.skip("Grailed listing not accessible")
    
    result = results[0]
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    assert result['item_data']['price'] > Decimal("0")
    assert result['item_data']['title'] is not None
    assert 'seller_data' in result  # Seller analysis performed
    assert result['final_price_rub'] > 0  # Full price calculation
```

#### test_error_scenarios.py
```python
async def test_error_boundary_real_scenarios(e2e_test_container):
    """–¢–µ—Å—Ç Error Boundary —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –æ—à–∏–±–æ–∫."""
    orchestrator = e2e_test_container.resolve(IScrapingOrchestrator)
    error_boundary = e2e_test_container.resolve(IErrorBoundary)
    
    # –¢–µ—Å—Ç —Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º URL
    invalid_urls = ["https://www.grailed.com/listings/invalid-listing-id"]
    
    results = await orchestrator.process_urls_concurrent(invalid_urls, user_id=123)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    assert len(results) == 1
    assert results[0].get('error') is not None
    assert results[0]['error']['category'] in ['scraping_error', 'not_found_error']
    assert results[0]['error']['user_message'] is not None
```

**–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ E2E —É—Ä–æ–≤–Ω—è**:
- –ü–æ–ª–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π workflow: –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ –æ—Ç–≤–µ—Ç–∞
- –†–µ–∞–ª—å–Ω—ã–µ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: eBay, Grailed, CBR, Shopfans pricing
- Headless browser –æ–ø–µ—Ä–∞—Ü–∏–∏: –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ Grailed
- Error handling: —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- Performance: –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –ø–æ–ª–Ω–æ–≥–æ pipeline
- Data integrity: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏
- Currency conversion: –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
- Customs duty calculation: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EUR/USD rates

---

## –ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### üìù –®–∞–±–ª–æ–Ω Unit —Ç–µ—Å—Ç–∞ —Å Dependency Injection

```python
"""–ú–æ–¥—É–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è [–û–ü–ò–°–ê–ù–ò–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò] —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä."""

import pytest
from decimal import Decimal
from unittest.mock import AsyncMock

from app.core.interfaces import IServiceInterface
from app.services.service_to_test import ServiceToTest


class TestServiceToTest:
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ ServiceToTest —á–µ—Ä–µ–∑ DI."""
    
    def test_normal_case_with_di(self, unit_test_container):
        """–¢–µ—Å—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Å–ª—É—á–∞—è —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä."""
        # Arrange - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ DI
        service = unit_test_container.resolve(IServiceInterface)
        
        # Arrange - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        input_data = "test_input"
        expected_output = "expected_result"
        
        # Act - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DI resolved —Å–µ—Ä–≤–∏—Å
        result = service.method_to_test(input_data)
        
        # Assert - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        assert result == expected_output, f"Expected {expected_output}, got {result}"
    
    def test_dependency_injection_resolution(self, unit_test_container):
        """–¢–µ—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π."""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ DI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∑–æ–ª–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        service = unit_test_container.resolve(IServiceInterface)
        assert service is not None
        assert isinstance(service, ServiceToTest)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–æ–∂–µ —Ä–µ–∑–æ–ª–≤—è—Ç—Å—è
        dependency = unit_test_container.resolve(IDependencyInterface)
        assert dependency is not None
    
    async def test_async_operation_with_di(self, unit_test_container):
        """–¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ DI."""
        service = unit_test_container.resolve(IServiceInterface)
        
        # –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ unit_test_container
        result = await service.async_method("test_input")
        
        assert result is not None
        assert result.status == "success"
    
    def test_error_handling_with_mocked_dependencies(self, unit_test_container):
        """–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏."""
        service = unit_test_container.resolve(IServiceInterface)
        
        # –í unit —Ç–µ—Å—Ç–∞—Ö –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∂–µ –∑–∞–º–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
        with pytest.raises(ValueError, match="Expected error message"):
            service.method_that_should_fail("invalid_input")
    
    @pytest.mark.parametrize("input_val,expected", [
        ("case1", "result1"),
        ("case2", "result2"),
        ("case3", "result3"),
    ])
    def test_multiple_cases_through_di(self, input_val, expected, unit_test_container):
        """–¢–µ—Å—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —á–µ—Ä–µ–∑ DI."""
        service = unit_test_container.resolve(IServiceInterface)
        assert service.method_to_test(input_val) == expected
```

### üìù –®–∞–±–ª–æ–Ω Integration —Ç–µ—Å—Ç–∞ —Å —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```python
"""Integration —Ç–µ—Å—Ç—ã –¥–ª—è [–û–ü–ò–°–ê–ù–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–ê] —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏."""

import pytest
from unittest.mock import patch, AsyncMock

from app.core.interfaces import IServiceInterface, IDependencyInterface


class TestServiceIntegration:
    """Integration —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏."""
    
    async def test_service_interaction_through_di(self, integration_test_container):
        """–¢–µ—Å—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä."""
        # –í integration —Ç–µ—Å—Ç–∞—Ö —á–∞—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–µ–∞–ª—å–Ω—ã–µ, —á–∞—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
        primary_service = integration_test_container.resolve(IServiceInterface)
        dependency_service = integration_test_container.resolve(IDependencyInterface)
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
        result = await primary_service.complex_operation("test_data")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç
        assert result.status == "completed"
        assert result.processed_by == dependency_service.__class__.__name__
    
    async def test_error_propagation_between_services(self, integration_test_container):
        """–¢–µ—Å—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏."""
        service = integration_test_container.resolve(IServiceInterface)
        
        # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–∞–∫ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—ã —Å–µ—Ä–≤–∏—Å–æ–≤
        with pytest.raises(ServiceException) as exc_info:
            await service.operation_that_depends_on_external_service()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Error Boundary
        assert exc_info.value.original_error is not None
        assert exc_info.value.service_name == "ExternalService"
    
    def test_configuration_injection(self, integration_test_container):
        """–¢–µ—Å—Ç –∏–Ω—ä–µ–∫—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ DI."""
        service = integration_test_container.resolve(IServiceInterface)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è
        assert service.config is not None
        assert service.config.test_mode == True  # Integration test config
```

### üìù –®–∞–±–ª–æ–Ω E2E —Ç–µ—Å—Ç–∞ —Å –ø–æ–ª–Ω—ã–º DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

```python
"""E2E —Ç–µ—Å—Ç—ã –¥–ª—è [–ü–û–õ–ù–´–ô WORKFLOW] —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏."""

import pytest
import asyncio
from decimal import Decimal


class TestCompleteWorkflow:
    """E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ workflow."""
    
    async def test_complete_user_scenario_e2e(self, e2e_test_container):
        """–ü–æ–ª–Ω—ã–π E2E —Ç–µ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è."""
        # –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ production DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        url_processor = e2e_test_container.resolve(IURLProcessor)
        orchestrator = e2e_test_container.resolve(IScrapingOrchestrator)
        formatter = e2e_test_container.resolve(IResponseFormatter)
        analytics = e2e_test_container.resolve(IAnalyticsService)
        
        # –°–∏–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
        user_input = "https://www.grailed.com/listings/real-listing-id"
        user_id = 12345
        
        # –ü–æ–ª–Ω—ã–π workflow
        processed_urls = url_processor.process_message(user_input, user_id)
        results = await orchestrator.process_urls_concurrent(
            processed_urls['valid_urls'], 
            user_id
        )
        formatted_response = await formatter.format_item_response(results[0])
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        assert "–†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏" in formatted_response
        assert "–¢–æ–≤–∞—Ä:" in formatted_response
        assert "‚ÇΩ" in formatted_response
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞–ø–∏—Å–∞–ª–∞—Å—å
        user_stats = analytics.get_user_stats(user_id, days=1)
        assert user_stats['total_requests'] >= 1
    
    @pytest.mark.slow  
    async def test_performance_under_load_e2e(self, e2e_test_container):
        """E2E —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π."""
        orchestrator = e2e_test_container.resolve(IScrapingOrchestrator)
        
        # –¢–µ—Å—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
        urls = [
            "https://www.ebay.com/itm/real-item-1",
            "https://www.grailed.com/listings/real-item-2",
            "https://www.grailed.com/real-seller-profile"
        ]
        
        start_time = asyncio.get_event_loop().time()
        
        # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
        results = await orchestrator.process_urls_concurrent(urls, user_id=123)
        
        end_time = asyncio.get_event_loop().time()
        execution_time = end_time - start_time
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        assert execution_time < 30.0  # –ú–∞–∫—Å–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è 3 URL
        assert len(results) == 3
        assert all(r.get('item_data') or r.get('seller_data') for r in results)
```

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–∫—Å—Ç—É—Ä –¥–ª—è DI

```python
# tests_new/conftest.py
import pytest
from app.core.container import Container
from app.core.interfaces import *
from tests_new.utils.mock_factories import *


@pytest.fixture
def unit_test_container():
    """DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è unit —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ –º–æ–∫–∞–º–∏."""
    container = Container()
    
    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    container.register(ICurrencyService, MockCurrencyService, lifetime=Lifetime.SINGLETON)
    container.register(IReliabilityService, MockReliabilityService, lifetime=Lifetime.SINGLETON)
    container.register(IShippingService, MockShippingService, lifetime=Lifetime.SINGLETON)
    container.register(IMarketplaceScraper, MockEbayScraper, lifetime=Lifetime.TRANSIENT)
    
    return container


@pytest.fixture
def integration_test_container():
    """DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è integration —Ç–µ—Å—Ç–æ–≤ —Å —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏."""
    container = Container()
    
    # –†–µ–∞–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
    container.register(IReliabilityService, ReliabilityService, lifetime=Lifetime.SINGLETON)
    container.register(IShippingService, ShippingService, lifetime=Lifetime.SINGLETON)
    
    # –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    container.register(ICurrencyService, MockCurrencyService, lifetime=Lifetime.SINGLETON)
    
    return container


@pytest.fixture
def e2e_test_container():
    """–ü–æ–ª–Ω—ã–π production DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤."""
    container = Container()
    
    # –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–∫ –≤ production
    # (—Å–º. app/core/service_locator.py)
    configure_production_container(container)
    
    return container
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### üéØ SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤ —Ç–µ—Å—Ç–∞—Ö

1. **Single Responsibility**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
2. **Open/Closed**: –¢–µ—Å—Ç—ã –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—é—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
3. **Liskov Substitution**: –ú–æ–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–µ–Ω—è—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
4. **Interface Segregation**: –¢–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
5. **Dependency Inversion**: –¢–µ—Å—Ç—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤), –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
def test_service_through_interface(unit_test_container):
    service = unit_test_container.resolve(ICurrencyService)  # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    result = await service.get_usd_to_rub_rate(session)
    assert result.rate > 0

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ø—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
def test_service_direct_instantiation():
    service = CurrencyService()  # –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
    result = await service.get_usd_to_rub_rate(session)
    assert result.rate > 0
```

### üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ

#### –¶–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ —Å–ª–æ—è–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **Core (DI/Interfaces)**: 95%+ - –∫—Ä–∏—Ç–∏—á–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **Services (Business Logic)**: 85%+ - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **Scrapers (Data Access)**: 75%+ - –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Bot (Presentation)**: 70%+ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **Cyclomatic Complexity**: < 10 –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤
- **Test Execution Time**: Unit < 1s, Integration < 5s, E2E < 60s
- **Flaky Test Rate**: < 1% (–æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤)
- **Coverage Gaps**: –ù–µ—Ç –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π

### üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### GitHub Actions –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
# .github/workflows/test.yml
name: Comprehensive Testing

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.11, 3.12]
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt -r requirements-dev.txt
        playwright install chromium
    
    - name: Unit tests with DI validation
      run: |
        pytest tests_new/unit/ -v --cov=app --cov-branch
        
    - name: Integration tests with service interaction
      run: |
        pytest tests_new/integration/ -v --cov=app --cov-append
        
    - name: E2E tests with real services
      run: |
        pytest tests_new/e2e/ -v --cov=app --cov-append
      env:
        BOT_TOKEN: ${{ secrets.TEST_BOT_TOKEN }}
        ENABLE_HEADLESS_BROWSER: true
    
    - name: Coverage report
      run: |
        coverage report --fail-under=70
        coverage html
    
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v3
```

### üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### Debugging DI –ø—Ä–æ–±–ª–µ–º

```python
def test_debug_di_container(unit_test_container):
    """–û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å dependency injection."""
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
    registrations = unit_test_container.get_registrations()
    print(f"Registered services: {list(registrations.keys())}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
    try:
        service = unit_test_container.resolve(IProblematicService)
        print(f"Service resolved: {type(service)}")
    except Exception as e:
        print(f"Resolution failed: {e}")
        
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    validation = unit_test_container.validate_services()
    if not validation['success']:
        for error in validation['errors']:
            print(f"Validation error: {error}")
```

#### Performance –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import cProfile
import asyncio

def test_performance_profiling(e2e_test_container):
    """–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏."""
    
    def run_test():
        orchestrator = e2e_test_container.resolve(IScrapingOrchestrator)
        
        async def async_test():
            return await orchestrator.process_urls_concurrent(
                ["https://www.grailed.com/listings/test"], 
                user_id=123
            )
        
        return asyncio.run(async_test())
    
    # –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
    profiler = cProfile.Profile()
    profiler.enable()
    
    result = run_test()
    
    profiler.disable()
    profiler.dump_stats('test_performance.prof')
    
    # –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    import pstats
    stats = pstats.Stats('test_performance.prof')
    stats.sort_stats('cumulative').print_stats(10)
```

### üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

#### Test Analytics Dashboard

```python
# tests_new/utils/test_analytics.py
class TestAnalytics:
    """–°–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤."""
    
    def collect_test_metrics(self):
        return {
            'execution_times': self.get_execution_times(),
            'failure_rates': self.get_failure_rates(),
            'coverage_trends': self.get_coverage_trends(),
            'dependency_health': self.check_dependency_health()
        }
    
    def generate_report(self):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –¥–ª—è CI/CD dashboard."""
        metrics = self.collect_test_metrics()
        
        return {
            'overall_health': self.calculate_health_score(metrics),
            'recommendations': self.generate_recommendations(metrics),
            'trends': self.analyze_trends(metrics)
        }
```

### üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Price-GH-Bot –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é, scalable –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö:

- **Clean Architecture**: –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- **SOLID Principles**: –°–æ–±–ª—é–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞  
- **Dependency Injection**: Loose coupling –∏ –ª—ë–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Protocol-based Design**: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ—Å—Ç—å
- **Comprehensive Coverage**: –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–æ–≤ (Unit/Integration/E2E)

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –í—ã—Å–æ–∫—É—é –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ë—ã—Å—Ç—Ä—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ‚úÖ –õ—ë–≥–∫—É—é —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**:
- –ò–∑—É—á–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `tests_new/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –∏–∑ —ç—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID –∏ dependency injection
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —á–∏—Å—Ç–æ—Ç—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤–æ –≤—Å–µ—Ö —Ç–µ—Å—Ç–∞—Ö